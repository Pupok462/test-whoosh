# Тестовое задание Weather API

## Задание
Было необходимо реализовать веб-сервис погоды в Москве. Сервис должен иметь 2 эндпоинта:
- *GET /weather* - получение текущей погоды в Москве и выводить ответ в формате:
   ```
    {
      "temp": 15.6
    }
   ```

- *GET /history* - получение всех среднесуточных температур из базы данных.
и выводить ответ в формате:
   ```
    [
      {"1.10.2022": {"temp": 21.1}},
      {"2.10.2022": {"temp": 17.5}}
    ]
   ```

## Спецификация сервиса
- Для получения погоды можно воспользоваться сервисом [OpenWeatherMap](https://openweathermap.org/api/one-call-3)
- Для метода *GET /weather* реализовать сохранение ответа сервиса в базу данных с промежутком в 1 час. При повторных запросах от пользователя в течение часа возвращать температуру, сохраненную в базе данных
- Если при запросе *GET /history* в базе данных нет записей, можно вернуть пользователю ошибку
- Если при запросе *GET /history* нет данных за определенный день, среднесуточной температурой за этот день считать 0.0
- Все температуры возвращаются пользователю в градусах Цельсия

## Запуск
  - `git clone https://github.com/Pupok462/test-whoosh.git`
  - `python -m venv venv`
  - `pip install -r requirements.txt`
  - `uvicorn app:app --reload --port 8000` (Порт по желанию)
## Дополнительные сведения
 - Чтобы проверить работает ли стягивание с [OpenWeatherMap](https://openweathermap.org/api/one-call-3) удалите файл `sql_app.db` сейчас там создана тестовая бд для проверки работы всех эндпоинтов

